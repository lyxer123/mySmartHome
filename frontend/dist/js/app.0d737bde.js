(function(){"use strict";var t={7889:function(t,e,s){var a=s(6848),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},["/login"!==t.$route.path&&"/register"!==t.$route.path?e("header",[e("h1",[t._v("智能家居温湿度监测系统")]),t.isAuthenticated?e("div",{staticClass:"user-panel"},[e("span",[t._v("欢迎, "+t._s(t.currentUser.username))]),e("button",{on:{click:t.logout}},[t._v("退出")])]):t._e()]):t._e(),e("main",[e("router-view")],1)])},o=[],n=(s(4114),s(4979),{data(){return{isAuthenticated:!1,currentUser:{username:""}}},methods:{logout(){localStorage.removeItem("token"),this.isAuthenticated=!1,this.currentUser={username:""},this.$router.push("/login")},checkAuth(){const t=localStorage.getItem("token");if(t){this.isAuthenticated=!0;const e=JSON.parse(atob(t.split(".")[1]));this.currentUser.username=e.username}}},created(){this.checkAuth()},watch:{$route(){this.checkAuth()}}}),i=n,u=s(1656),l=(0,u.A)(i,r,o,!1,null,null,null),c=l.exports,d=(s(8111),s(3579),s(6178)),m=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"dashboard"},[e("div",{staticClass:"sensor-card temperature"},[e("h2",[t._v("温度")]),e("div",{staticClass:"sensor-value"},[t._v(t._s(t.temperature)+" °C")]),e("div",{staticClass:"sensor-icon"},[t._v("🌡️")])]),e("div",{staticClass:"sensor-card humidity"},[e("h2",[t._v("湿度")]),e("div",{staticClass:"sensor-value"},[t._v(t._s(t.humidity)+" %")]),e("div",{staticClass:"sensor-icon"},[t._v("💧")])])]),e("div",{staticClass:"status-panel"},[e("div",{staticClass:"status-item"},[e("span",{staticClass:"status-label"},[t._v("设备ID:")]),e("span",{staticClass:"status-value"},[t._v(t._s(t.deviceId))])]),e("div",{staticClass:"status-item"},[e("span",{staticClass:"status-label"},[t._v("最后更新:")]),e("span",{staticClass:"status-value"},[t._v(t._s(t.lastUpdate))])]),e("div",{staticClass:"status-item"},[e("span",{staticClass:"status-label"},[t._v("连接状态:")]),e("span",{staticClass:"status-value",class:{"status-online":t.isConnected}},[t._v(" "+t._s(t.isConnected?"在线":"离线")+" ")])])])])},p=[],v={data(){return{temperature:"--",humidity:"--",deviceId:"--",lastUpdate:"--",isConnected:!1}},methods:{async fetchData(){try{const t=await this.$axios.get("/api/sensor-data/latest");this.temperature=t.data.temperature.toFixed(1),this.humidity=t.data.humidity.toFixed(1),this.deviceId=t.data.deviceId,this.lastUpdate=new Date(t.data.receivedAt).toLocaleString(),this.isConnected=!0}catch(t){console.error("获取数据失败:",t),this.isConnected=!1}}},created(){this.fetchData(),this.interval=setInterval(this.fetchData,1e4)},beforeDestroy(){clearInterval(this.interval)}},f=v,h=(0,u.A)(f,m,p,!1,null,"c157fe54",null),g=h.exports,_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-container"},[e("div",{staticClass:"login-box"},[e("h1",[t._v("智能家居系统登录")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.handleLogin.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",[t._v("用户名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.username,expression:"form.username"}],attrs:{type:"text",required:""},domProps:{value:t.form.username},on:{input:function(e){e.target.composing||t.$set(t.form,"username",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("密码")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{type:"password",required:""},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}})]),e("div",{staticClass:"form-actions"},[e("button",{attrs:{type:"submit"}},[t._v("登录")]),e("router-link",{staticClass:"register-link",attrs:{to:"/register"}},[t._v("没有账号？立即注册")])],1)])])])},b=[],w={data(){return{form:{username:"",password:""}}},methods:{async handleLogin(){try{const t=await this.$axios.post("/api/auth/login",this.form);localStorage.setItem("token",t.data.token),this.$router.push("/dashboard")}catch(t){alert("登录失败: "+(t.response?.data?.message||t.message))}}}},y=w,C=(0,u.A)(y,_,b,!1,null,"7ae43228",null),x=C.exports,A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"register-container"},[e("div",{staticClass:"register-box"},[e("h1",[t._v("注册新账户")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.handleRegister.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",[t._v("用户名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.username,expression:"form.username"}],attrs:{type:"text",required:""},domProps:{value:t.form.username},on:{input:function(e){e.target.composing||t.$set(t.form,"username",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("密码")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{type:"password",required:""},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("确认密码")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.confirmPassword,expression:"form.confirmPassword"}],attrs:{type:"password",required:""},domProps:{value:t.form.confirmPassword},on:{input:function(e){e.target.composing||t.$set(t.form,"confirmPassword",e.target.value)}}})]),e("div",{staticClass:"form-actions"},[e("button",{attrs:{type:"submit"}},[t._v("注册")]),e("router-link",{staticClass:"login-link",attrs:{to:"/login"}},[t._v("已有账号？立即登录")])],1)])])])},k=[],$={data(){return{form:{username:"",password:"",confirmPassword:""}}},methods:{async handleRegister(){if(this.form.password===this.form.confirmPassword)try{await this.$axios.post("/api/auth/register",{username:this.form.username,password:this.form.password}),alert("注册成功，请登录"),this.$router.push("/login")}catch(t){alert("注册失败: "+(t.response?.data?.message||t.message))}else alert("两次输入的密码不一致")}}},P=$,O=(0,u.A)(P,A,k,!1,null,"2ca3fa42",null),I=O.exports;a.Ay.use(d.Ay);const S=new d.Ay({mode:"history",routes:[{path:"/",redirect:"/dashboard"},{path:"/dashboard",name:"Dashboard",component:g,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:x},{path:"/register",name:"Register",component:I}]});S.beforeEach((t,e,s)=>{const a=localStorage.getItem("token");t.matched.some(t=>t.meta.requiresAuth)&&!a?s("/login"):s()});var D=S,j=s(4373);a.Ay.config.productionTip=!1,a.Ay.prototype.$axios=j.A.create({baseURL:"http://localhost:3000/api"}),new a.Ay({router:D,render:t=>t(c)}).$mount("#app")}},e={};function s(a){var r=e[a];if(void 0!==r)return r.exports;var o=e[a]={exports:{}};return t[a].call(o.exports,o,o.exports,s),o.exports}s.m=t,function(){var t=[];s.O=function(e,a,r,o){if(!a){var n=1/0;for(c=0;c<t.length;c++){a=t[c][0],r=t[c][1],o=t[c][2];for(var i=!0,u=0;u<a.length;u++)(!1&o||n>=o)&&Object.keys(s.O).every(function(t){return s.O[t](a[u])})?a.splice(u--,1):(i=!1,o<n&&(n=o));if(i){t.splice(c--,1);var l=r();void 0!==l&&(e=l)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[a,r,o]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var r,o,n=a[0],i=a[1],u=a[2],l=0;if(n.some(function(e){return 0!==t[e]})){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(u)var c=u(s)}for(e&&e(a);l<n.length;l++)o=n[l],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(c)},a=self["webpackChunksmart_home_frontend"]=self["webpackChunksmart_home_frontend"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],function(){return s(7889)});a=s.O(a)})();
//# sourceMappingURL=app.0d737bde.js.map