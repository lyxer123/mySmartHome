{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nexport default {\n  data() {\n    return {\n      isAuthenticated: false,\n      currentUser: {\n        username: ''\n      }\n    };\n  },\n  methods: {\n    logout() {\n      localStorage.removeItem('token');\n      this.isAuthenticated = false;\n      this.currentUser = {\n        username: ''\n      };\n      this.$router.push('/login');\n    },\n    checkAuth() {\n      const token = localStorage.getItem('token');\n      if (token) {\n        this.isAuthenticated = true;\n        const payload = JSON.parse(atob(token.split('.')[1]));\n        this.currentUser.username = payload.username;\n      }\n    }\n  },\n  created() {\n    this.checkAuth();\n  },\n  watch: {\n    $route() {\n      this.checkAuth();\n    }\n  }\n};","map":{"version":3,"names":["data","isAuthenticated","currentUser","username","methods","logout","localStorage","removeItem","$router","push","checkAuth","token","getItem","payload","JSON","parse","atob","split","created","watch","$route"],"sources":["src/App.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <header v-if=\"$route.path !== '/login' && $route.path !== '/register'\">\r\n      <h1>智能家居温湿度监测系统</h1>\r\n      <div class=\"user-panel\" v-if=\"isAuthenticated\">\r\n        <span>欢迎, {{ currentUser.username }}</span>\r\n        <button @click=\"logout\">退出</button>\r\n      </div>\r\n    </header>\r\n    \r\n    <main>\r\n      <router-view/>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      isAuthenticated: false,\r\n      currentUser: {\r\n        username: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    logout() {\r\n      localStorage.removeItem('token');\r\n      this.isAuthenticated = false;\r\n      this.currentUser = { username: '' };\r\n      this.$router.push('/login');\r\n    },\r\n    checkAuth() {\r\n      const token = localStorage.getItem('token');\r\n      if (token) {\r\n        this.isAuthenticated = true;\r\n        const payload = JSON.parse(atob(token.split('.')[1]));\r\n        this.currentUser.username = payload.username;\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.checkAuth();\r\n  },\r\n  watch: {\r\n    $route() {\r\n      this.checkAuth();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n  font-family: 'Helvetica Neue', Arial, sans-serif;\r\n  background-color: #f5f7fa;\r\n  color: #333;\r\n  line-height: 1.6;\r\n}\r\n\r\n#app {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\nheader {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n  position: relative;\r\n}\r\n\r\nheader h1 {\r\n  color: #2c3e50;\r\n  font-size: 2.5rem;\r\n}\r\n\r\n.user-panel {\r\n  position: absolute;\r\n  right: 20px;\r\n  top: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.user-panel button {\r\n  padding: 5px 10px;\r\n  background-color: #e74c3c;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.user-panel button:hover {\r\n  background-color: #c0392b;\r\n}\r\n</style>"],"mappings":";;AAiBA;EACAA,KAAA;IACA;MACAC,eAAA;MACAC,WAAA;QACAC,QAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,OAAA;MACAC,YAAA,CAAAC,UAAA;MACA,KAAAN,eAAA;MACA,KAAAC,WAAA;QAAAC,QAAA;MAAA;MACA,KAAAK,OAAA,CAAAC,IAAA;IACA;IACAC,UAAA;MACA,MAAAC,KAAA,GAAAL,YAAA,CAAAM,OAAA;MACA,IAAAD,KAAA;QACA,KAAAV,eAAA;QACA,MAAAY,OAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAC,IAAA,CAAAL,KAAA,CAAAM,KAAA;QACA,KAAAf,WAAA,CAAAC,QAAA,GAAAU,OAAA,CAAAV,QAAA;MACA;IACA;EACA;EACAe,QAAA;IACA,KAAAR,SAAA;EACA;EACAS,KAAA;IACAC,OAAA;MACA,KAAAV,SAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}